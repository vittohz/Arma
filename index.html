<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site de RPG - Vitao</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2c3e50);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            animation: fadeIn 1s ease-in-out;
            text-align: center;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            color: #4CAF50;
        }

        .main-menu, .app-container {
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            animation: fadeIn 1s ease-in-out;
            backdrop-filter: blur(10px);
            max-width: 800px;
            width: 100%;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .menu-button {
            padding: 20px;
            font-size: 1.2rem;
            background: linear-gradient(45deg, #333, #555);
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .menu-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .menu-button:hover:before {
            left: 100%;
        }

        .menu-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .menu-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2rem;
            cursor: pointer;
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        /* Contador de Tiros */
        .contador {
            font-size: 3rem;
            margin: 20px 0;
            animation: fadeIn 1.5s ease-in-out;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        button {
            font-size: 1rem;
            padding: 12px 24px;
            cursor: pointer;
            background: linear-gradient(45deg, #333, #555);
            color: #fff;
            border: none;
            border-radius: 8px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .input-container {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }

        input[type="number"], input[type="text"], select {
            font-size: 1rem;
            padding: 8px;
            border: 1px solid #555;
            background-color: #222;
            color: #fff;
            border-radius: 5px;
            text-align: center;
        }

        /* Dados */
        .dice-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .dice-button {
            padding: 20px;
            font-size: 1.5rem;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border-radius: 10px;
            transition: all 0.3s;
        }

        .dice-result {
            font-size: 2rem;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Ficha de Personagem */
        .character-sheet {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .stat-group {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
        }

        .stat-input {
            width: 80px;
        }

        /* HP e Recursos */
        .resource-bar {
            background: #333;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }

        .resource-fill {
            height: 100%;
            transition: width 0.3s;
            border-radius: 15px;
        }

        .hp-fill { background: linear-gradient(90deg, #e74c3c, #c0392b); }
        .mp-fill { background: linear-gradient(90deg, #3498db, #2980b9); }

        .resource-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        /* Invent√°rio */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .item-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .item-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        /* Notifica√ß√µes */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #333, #555);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            animation: slideIn 0.5s ease-in-out;
            max-width: 300px;
            z-index: 1000;
        }

        /* Anima√ß√µes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(100%); }
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .rolling {
            animation: diceRoll 0.5s ease-in-out;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .contador { font-size: 2rem; }
            .button-container { flex-direction: column; }
            .input-container { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Menu Principal -->
        <div class="main-menu" id="main-menu">
            <h1>üé≤ Site de RPG do Vitao üé≤</h1>
            <div class="menu-grid">
                <button class="menu-button" onclick="startApp('contador')">üî´ Contador de Tiros</button>
                <button class="menu-button" onclick="startApp('dados')">üé≤ Dados</button>
                <button class="menu-button" onclick="startApp('ficha')">üìã Ficha de Personagem</button>
                <button class="menu-button" onclick="startApp('inventario')">üéí Invent√°rio</button>
                <button class="menu-button" onclick="startApp('notas')">üìù Notas de Sess√£o</button>
                <button class="menu-button" onclick="startApp('calculadora')">üßÆ Calculadora de Dano</button>
            </div>
        </div>

        <!-- Contador de Tiros -->
        <div class="app-container" id="contador-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üî´ Contador de Tiros</h1>

            <div class="contador">
                <span id="contador-atual">0</span>/<span id="maximo">0</span>
                <p id="arma">Vazio</p>
            </div>

            <div class="button-container">
                <button onclick="decrementar()">Atirar</button>
                <button id="rajada-button" onclick="rajada()" style="display:none;">Rajada</button>
                <button onclick="restaurar()">Recarregar</button>
                <button onclick="zerar()">Zerar</button>
            </div>

            <div class="input-container">
                <label>Muni√ß√µes no Pente:</label>
                <input type="number" id="valor-atual" value="0" min="0">
                <label>Cartuchos:</label>
                <input type="number" id="valor-maximo" value="0" min="0">
                <button onclick="atualizarValores()">Atualizar</button>
            </div>

            <div style="position: relative;">
                <button onclick="togglePresetList()">Presets de Armas</button>
                <div id="preset-list" style="display: none; position: absolute; top: 40px; left: 50%; transform: translateX(-50%); background: #222; padding: 10px; border-radius: 5px; z-index: 10;">
                    <button onclick="aplicarPreset('Pistola', 12, 40, 12)">Pistola</button>
                    <button onclick="aplicarPreset('Revolver', 6, 40, 6)">Revolver</button>
                    <button onclick="aplicarPreset('Submetralhadora', 30, 120, 30)">Submetralhadora</button>
                    <button onclick="aplicarPreset('Rifle', 8, 32, 8)">Rifle</button>
                    <button onclick="aplicarPreset('Shotgun', 6, 24, 6)">Shotgun</button>
                </div>
            </div>
        </div>

        <!-- Dados -->
        <div class="app-container" id="dados-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üé≤ Dados de RPG</h1>
            
            <div class="dice-container">
                <button class="dice-button" onclick="rolarDado(4)">d4</button>
                <button class="dice-button" onclick="rolarDado(6)">d6</button>
                <button class="dice-button" onclick="rolarDado(8)">d8</button>
                <button class="dice-button" onclick="rolarDado(10)">d10</button>
                <button class="dice-button" onclick="rolarDado(12)">d12</button>
                <button class="dice-button" onclick="rolarDado(20)">d20</button>
                <button class="dice-button" onclick="rolarDado(100)">d100</button>
            </div>

            <div class="input-container">
                <input type="number" id="num-dados" value="1" min="1" max="10" placeholder="Qtd">
                <select id="tipo-dado">
                    <option value="4">d4</option>
                    <option value="6">d6</option>
                    <option value="8">d8</option>
                    <option value="10">d10</option>
                    <option value="12">d12</option>
                    <option value="20" selected>d20</option>
                    <option value="100">d100</option>
                </select>
                <input type="number" id="modificador" value="0" placeholder="Mod">
                <button onclick="rolarPersonalizado()">Rolar</button>
            </div>

            <div class="dice-result" id="resultado-dados">
                Clique em um dado para rolar!
            </div>

            <div id="historico-dados" style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px; margin-top: 20px;">
                <strong>Hist√≥rico:</strong>
            </div>
        </div>

        <!-- Ficha de Personagem -->
        <div class="app-container" id="ficha-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üìã Ficha de Personagem</h1>
            
            <div class="character-sheet">
                <div class="stat-group">
                    <h2>Informa√ß√µes B√°sicas</h2>
                    <div class="stat-row">
                        <label>Nome:</label>
                        <input type="text" id="char-nome" placeholder="Nome do Personagem">
                    </div>
                    <div class="stat-row">
                        <label>N√≠vel:</label>
                        <input type="number" id="char-nivel" value="1" min="1" class="stat-input">
                    </div>
                </div>

                <div class="stat-group">
                    <h2>Recursos</h2>
                    <div class="stat-row">
                        <label>HP:</label>
                        <input type="number" id="hp-atual" value="100" min="0" class="stat-input" onchange="updateResourceBar('hp')">
                        <span>/</span>
                        <input type="number" id="hp-max" value="100" min="1" class="stat-input" onchange="updateResourceBar('hp')">
                    </div>
                    <div class="resource-bar">
                        <div class="resource-fill hp-fill" id="hp-bar" style="width: 100%;"></div>
                        <div class="resource-text" id="hp-text">100/100</div>
                    </div>
                    
                    <div class="stat-row">
                        <label>MP:</label>
                        <input type="number" id="mp-atual" value="50" min="0" class="stat-input" onchange="updateResourceBar('mp')">
                        <span>/</span>
                        <input type="number" id="mp-max" value="50" min="1" class="stat-input" onchange="updateResourceBar('mp')">
                    </div>
                    <div class="resource-bar">
                        <div class="resource-fill mp-fill" id="mp-bar" style="width: 100%;"></div>
                        <div class="resource-text" id="mp-text">50/50</div>
                    </div>
                </div>

                <div class="stat-group">
                    <h2>Atributos</h2>
                    <div class="stat-row">
                        <label>For√ßa:</label>
                        <input type="number" id="forca" value="10" min="1" max="20" class="stat-input">
                    </div>
                    <div class="stat-row">
                        <label>Destreza:</label>
                        <input type="number" id="destreza" value="10" min="1" max="20" class="stat-input">
                    </div>
                    <div class="stat-row">
                        <label>Intelig√™ncia:</label>
                        <input type="number" id="inteligencia" value="10" min="1" max="20" class="stat-input">
                    </div>
                </div>

                <button onclick="salvarFicha()" style="width: 100%; margin-top: 20px;">Salvar Ficha</button>
            </div>
        </div>

        <!-- Invent√°rio -->
        <div class="app-container" id="inventario-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üéí Invent√°rio</h1>
            
            <div class="input-container">
                <input type="text" id="novo-item" placeholder="Nome do item">
                <input type="number" id="item-quantidade" value="1" min="1" placeholder="Qtd">
                <button onclick="adicionarItem()">Adicionar Item</button>
            </div>

            <div class="inventory-grid" id="lista-inventario">
                <!-- Itens ser√£o adicionados aqui -->
            </div>
        </div>

        <!-- Notas -->
        <div class="app-container" id="notas-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üìù Notas de Sess√£o</h1>
            
            <div style="margin: 20px 0;">
                <input type="text" id="titulo-nota" placeholder="T√≠tulo da nota" style="width: 100%; margin-bottom: 10px;">
                <textarea id="conteudo-nota" placeholder="Escreva suas notas aqui..." style="width: 100%; height: 200px; background: #222; color: #fff; border: 1px solid #555; border-radius: 5px; padding: 10px; resize: vertical;"></textarea>
                <button onclick="salvarNota()" style="width: 100%; margin-top: 10px;">Salvar Nota</button>
            </div>

            <div id="lista-notas">
                <!-- Notas salvas aparecer√£o aqui -->
            </div>
        </div>

        <!-- Calculadora de Dano -->
        <div class="app-container" id="calculadora-app" style="display: none;">
            <span class="back-button" onclick="backToMainMenu()">‚Üê</span>
            <h1>üßÆ Calculadora de Dano</h1>
            
            <div class="input-container">
                <input type="text" id="formula-dano" placeholder="Ex: 2d6+3" style="width: 200px;">
                <button onclick="calcularDano()">Calcular</button>
            </div>

            <div class="dice-result" id="resultado-dano">
                Digite uma f√≥rmula de dano (ex: 2d6+3)
            </div>

            <div style="margin-top: 20px;">
                <h3>F√≥rmulas R√°pidas:</h3>
                <div class="button-container">
                    <button onclick="usarFormula('1d4')">1d4</button>
                    <button onclick="usarFormula('1d6')">1d6</button>
                    <button onclick="usarFormula('1d8')">1d8</button>
                    <button onclick="usarFormula('2d6')">2d6</button>
                    <button onclick="usarFormula('1d10+2')">1d10+2</button>
                    <button onclick="usarFormula('2d8+3')">2d8+3</button>
                </div>
            </div>
        </div>
    </div>

    <div id="notificacoes"></div>

    <script>
        // Estado global
        let appState = {
            contador: { atual: 0, maximo: 0, capacidade: 0, arma: 'Vazio' },
            ficha: {},
            inventario: [],
            notas: [],
            historicoDados: []
        };

        // Inicializa√ß√£o
        window.onload = function() {
            carregarDados();
        };

        // Navega√ß√£o
        function startApp(mode) {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById(mode + '-app').style.display = 'block';
            
            if (mode === 'contador') {
                atualizarDisplayContador();
            } else if (mode === 'ficha') {
                carregarFicha();
            } else if (mode === 'inventario') {
                atualizarInventario();
            } else if (mode === 'notas') {
                atualizarNotas();
            }
        }

        function backToMainMenu() {
            document.querySelectorAll('.app-container').forEach(app => {
                app.style.display = 'none';
            });
            document.getElementById('main-menu').style.display = 'block';
        }

        // Salvar/Carregar dados
        function salvarDados() {
            try {
                const dados = JSON.stringify(appState);
                // Simulando localStorage com vari√°vel global
                window.savedData = dados;
            } catch (e) {
                console.log('Erro ao salvar dados');
            }
        }

        function carregarDados() {
            try {
                if (window.savedData) {
                    appState = JSON.parse(window.savedData);
                }
            } catch (e) {
                console.log('Erro ao carregar dados');
            }
        }

        // === CONTADOR DE TIROS ===
        function atualizarDisplayContador() {
            document.getElementById("contador-atual").textContent = appState.contador.atual;
            document.getElementById("maximo").textContent = appState.contador.maximo;
            document.getElementById("arma").textContent = appState.contador.arma;
            document.title = `${appState.contador.arma} | ${appState.contador.atual}/${appState.contador.maximo}`;
            salvarDados();
        }

        function decrementar() {
            if (appState.contador.atual > 0) {
                appState.contador.atual--;
                atualizarDisplayContador();
                if (appState.contador.atual === 0) {
                    criarNotificacao("Sem muni√ß√£o no pente!");
                }
            } else {
                criarNotificacao("Pente vazio!");
            }
        }

        function rajada() {
            if (appState.contador.atual > 0) {
                const tiros = Math.min(appState.contador.atual, 10);
                appState.contador.atual -= tiros;
                atualizarDisplayContador();
                criarNotificacao(`Rajada de ${tiros} tiros!`);
            } else {
                criarNotificacao("Pente vazio!");
            }
        }

        function restaurar() {
            const falta = appState.contador.capacidade - appState.contador.atual;
            const recarga = Math.min(falta, appState.contador.maximo);
            appState.contador.atual += recarga;
            appState.contador.maximo -= recarga;
            atualizarDisplayContador();
            if (recarga > 0) {
                criarNotificacao(`Recarregado com ${recarga} muni√ß√µes!`);
            } else {
                criarNotificacao("Sem muni√ß√£o para recarregar!");
            }
        }

        function zerar() {
            appState.contador.atual = 0;
            appState.contador.maximo = 0;
            atualizarDisplayContador();
            criarNotificacao("Contador zerado!");
        }

        function atualizarValores() {
            const novoAtual = parseInt(document.getElementById("valor-atual").value);
            const novoMaximo = parseInt(document.getElementById("valor-maximo").value);
            if (!isNaN(novoAtual) && !isNaN(novoMaximo)) {
                appState.contador.atual = novoAtual;
                appState.contador.maximo = novoMaximo;
                atualizarDisplayContador();
            }
        }

        function togglePresetList() {
            const list = document.getElementById("preset-list");
            list.style.display = list.style.display === 'none' ? 'block' : 'none';
        }

        function aplicarPreset(nome, atual, max, cap) {
            appState.contador.arma = nome;
            appState.contador.atual = atual;
            appState.contador.maximo = max;
            appState.contador.capacidade = cap;
            
            document.getElementById("valor-atual").value = atual;
            document.getElementById("valor-maximo").value = max;
            atualizarDisplayContador();
            
            const rajadaButton = document.getElementById("rajada-button");
            rajadaButton.style.display = nome === 'Submetralhadora' ? 'block' : 'none';
            
            togglePresetList();
        }

        // === DADOS ===
        function rolarDado(lados) {
            const resultado = Math.floor(Math.random() * lados) + 1;
            const button = event.target;
            button.classList.add('rolling');
            
            setTimeout(() => {
                button.classList.remove('rolling');
                document.getElementById('resultado-dados').innerHTML = 
                    `<strong>d${lados}: ${resultado}</strong>`;
                adicionarHistoricoDados(`d${lados}: ${resultado}`);
            }, 500);
        }

        function rolarPersonalizado() {
            const numDados = parseInt(document.getElementById('num-dados').value);
            const tipoDado = parseInt(document.getElementById('tipo-dado').value);
            const modificador = parseInt(document.getElementById('modificador').value) || 0;
            
            let total = 0;
            let resultados = [];
            
            for (let i = 0; i < numDados; i++) {
                const resultado = Math.floor(Math.random() * tipoDado) + 1;
                resultados.push(resultado);
                total += resultado;
            }
            
            total += modificador;
            
            const texto = `${numDados}d${tipoDado}${modificador >= 0 ? '+' + modificador : modificador}: [${resultados.join(', ')}] = ${total}`;
            document.getElementById('resultado-dados').innerHTML = `<strong>${texto}</strong>`;
            adicionarHistoricoDados(texto);
        }

        function adicionarHistoricoDados(texto) {
            appState.historicoDados.unshift(texto);
            if (appState.historicoDados.length > 10) {
                appState.historicoDados.pop();
            }
            
            const historico = document.getElementById('historico-dados');
            historico.innerHTML = '<strong>Hist√≥rico:</strong><br>' + 
                appState.historicoDados.map(h => `‚Ä¢ ${h}`).join('<br>');
            
            salvarDados();
        }

        // === FICHA DE PERSONAGEM ===
        function updateResourceBar(tipo) {
            const atual = parseInt(document.getElementById(tipo + '-atual').value);
            const max = parseInt(document.getElementById(tipo + '-max').value);
            const porcentagem = (atual / max) * 100;
            
            document.getElementById(tipo + '-bar').style.width = porcentagem + '%';
            document.getElementById(tipo + '-text').textContent = atual + '/' + max;
            
            salvarDados();
        }

        function salvarFicha() {
            appState.ficha = {
                nome: document.getElementById('char-nome').value,
                nivel: document.getElementById('char-nivel').value,
                hpAtual: document.getElementById('hp-atual').value,
                hpMax: document.getElementById('hp-max').value,
                mpAtual: document.getElementById('mp-atual').value,
                mpMax: document.getElementById('mp-max').value,
                forca: document.getElementById('forca').value,
                destreza: document.getElementById('destreza').value,
                inteligencia: document.getElementById('inteligencia').value
            };
            salvarDados();
            criarNotificacao('Ficha salva com sucesso!');
        }

        function carregarFicha() {
            if (appState.ficha.nome
